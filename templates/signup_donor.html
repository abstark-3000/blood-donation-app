<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sign Up - Blood Donation Portal</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/signup_donor.css') }}">
</head>
<body>
  <div class="container">
    <h2>Create Account</h2>
    <form method="POST" id="signupForm">
      <input type="text" name="username" placeholder="Username" required>
      <input type="email" name="email" placeholder="Email" required>
      <input type="password" name="password" placeholder="Password" required>

      <!-- Mobile number field -->
      <input type="tel" name="mobile" placeholder="Mobile Number" pattern="[0-9]{10}" maxlength="10" required>

      <!-- Blood Group Selection -->
      <label for="blood_group">Blood Group:</label>
      <select name="blood_group" id="blood_group" class="styled-select" required>
        <option value="">--Select Blood Group--</option>
        <option value="A+">ðŸ©¸ A+</option>
        <option value="A-">ðŸ©¸ A-</option>
        <option value="B+">ðŸ©¸ B+</option>
        <option value="B-">ðŸ©¸ B-</option>
        <option value="AB+">ðŸ©¸ AB+</option>
        <option value="AB-">ðŸ©¸ AB-</option>
        <option value="O+">ðŸ©¸ O+</option>
        <option value="O-">ðŸ©¸ O-</option>
      </select>

      <!-- Hidden location fields -->
      <input type="hidden" name="latitude" id="latitude">
      <input type="hidden" name="longitude" id="longitude">

      <button type="submit" id="submitBtn" disabled>Sign Up</button>
      <p id="locStatus">Detecting your location...</p>
    </form>
    <p>Already have an account? <a href="{{ url_for('login') }}">Login here</a></p>
  </div>

  <script>
    const submitBtn = document.getElementById("submitBtn");
    const locStatus = document.getElementById("locStatus");

    window.onload = function() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function(position) {
            document.getElementById("latitude").value = position.coords.latitude;
            document.getElementById("longitude").value = position.coords.longitude;
            locStatus.textContent = "Location detected!";
            submitBtn.disabled = false;
          },
          function(error) {
            locStatus.textContent = "Location denied! You must allow location to sign up.";
          },
          { enableHighAccuracy: true }
        );
      } else {
        locStatus.textContent = "Geolocation not supported by your browser.";
      }
    }
  </script>
</body>
</html>
